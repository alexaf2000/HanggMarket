(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{200:function(e,t,r){e.exports=r.p+"img/72bab5f.jpg"},203:function(e,t,r){var content=r(212);"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,r(23).default)("6ddc9025",content,!0,{sourceMap:!1})},211:function(e,t,r){"use strict";var o=r(203);r.n(o).a},212:function(e,t,r){(e.exports=r(22)(!1)).push([e.i,".images-slider{width:50%;display:inline-block;height:120px}.images-slider .vs-image--img{background-size:cover!important}",""])},213:function(e,t,r){"use strict";r.r(t);r(63),r(17);var o=r(2),c=r(7),n=r.n(c),d={fetch:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.loadData();case 1:case"end":return t.stop()}}),t)})))()},props:["productId"],data:function(){return{selected:null,price:{value:"",date_start:null,date_end:null},prices:[],errors:[]}},methods:{loadData:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.price={value:"",date_start:null,date_end:null},t.next=3,n.a.get("http://hanggmarket.com/api/product/show/"+e.productId+"/prices").then((function(t){e.prices=t.data}));case 3:case"end":return t.stop()}}),t)})))()},addPrice:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.validPrice()){t.next=5;break}return t.next=3,n.a.post("http://hanggmarket.com/api/price/store/product/"+e.productId,e.price);case 3:e.$vs.notify({title:"Precio añadido correctamente.",text:"El precio ha sido añadido correctamente.",color:"success",icon:"check_box"}),e.loadData();case 5:case"end":return t.stop()}}),t)})))()},modifyPrice:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.validPrice()){t.next=5;break}return t.next=3,n.a.post("http://hanggmarket.com/api/price/update/"+e.selected.id,e.price);case 3:e.$vs.notify({title:"Precio modificado.",text:"El precio ha sido modificado correctamente.",color:"success",icon:"check_box"}),e.loadData();case 5:case"end":return t.stop()}}),t)})))()},dialogDeletePrice:function(e){this.$vs.dialog({type:"confirm",color:"danger",title:"¿Estás seguro?",acceptText:"Confirmar",cancelText:"Cancelar",text:"Se va a proceder con la eliminación de el precio.",accept:this.deletePrice})},deletePrice:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n.a.delete("http://hanggmarket.com/api/price/destroy/"+e.selected.id).then((function(t){e.$vs.notify({title:"Precio eliminado.",text:"El precio ha sido eliminado correctamente.",color:"success",icon:"check_box"}),e.loadData()}));case 2:case"end":return t.stop()}}),t)})))()},validPrice:function(e){if(this.errors=[],this.price.value&&this.price.date_start&&this.price.date_end)return!0;this.errors.push("Debes de rellenar todos los campos.")}}},l=r(12),v={components:{pricesTable:Object(l.a)(d,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("vs-row",[r("vs-col",{attrs:{"vs-w":"9"}},[r("vs-table",{attrs:{data:e.prices},scopedSlots:e._u([{key:"default",fn:function(t){var data=t.data;return e._l(data,(function(tr,t){return r("vs-tr",{key:t,attrs:{data:tr}},[r("vs-td",{attrs:{data:data[t].date_start}},[e._v(e._s(data[t].date_start))]),e._v(" "),r("vs-td",{attrs:{data:data[t].data_end}},[e._v(e._s(data[t].date_end))]),e._v(" "),r("vs-td",{attrs:{data:data[t].value}},[e._v(e._s(data[t].value)+"€")])],1)}))}}]),model:{value:e.selected,callback:function(t){e.selected=t},expression:"selected"}},[r("template",{slot:"header"},[r("h3",[e._v("Precios")])]),e._v(" "),r("template",{slot:"thead"},[r("vs-th",[e._v("Fecha de inicio")]),e._v(" "),r("vs-th",[e._v("Fecha de fin.")]),e._v(" "),r("vs-th",[e._v("Precio")])],1)],2)],1),e._v(" "),r("vs-col",{attrs:{"vs-w":"3"}},[r("vs-input",{attrs:{type:"number","label-placeholder":"Precio"},model:{value:e.price.value,callback:function(t){e.$set(e.price,"value",t)},expression:"price.value"}}),e._v(" "),r("vs-input",{attrs:{type:"date","label-placeholder":"Fecha de inicio"},model:{value:e.price.date_start,callback:function(t){e.$set(e.price,"date_start",t)},expression:"price.date_start"}}),e._v(" "),r("vs-input",{attrs:{type:"date","label-placeholder":"Fecha de finalización"},model:{value:e.price.date_end,callback:function(t){e.$set(e.price,"date_end",t)},expression:"price.date_end"}}),e._v(" "),e.selected?e._e():r("vs-button",{on:{click:e.addPrice}},[e._v("Añadir precio")]),e._v(" "),e.selected?r("vs-button",{on:{click:e.modifyPrice}},[e._v("Modificar precio")]):e._e(),e._v(" "),r("vs-button",{attrs:{disabled:!e.selected},on:{click:function(t){e.selected=null}}},[e._v("Deseleccionar")]),e._v(" "),e.selected?r("vs-button",{attrs:{color:"danger"},on:{click:function(t){return e.dialogDeletePrice(e.selected.id)}}},[e._v("Eliminar")]):e._e(),e._v(" "),r("vs-alert",{attrs:{active:e.errors.length>0,icon:"info",color:"danger"}},e._l(e.errors,(function(t){return r("p",[e._v(e._s(t))])})),0)],1)],1)}),[],!1,null,null,null).exports},validate:function(e){var t=e.params;return/^\d+$/.test(t.id)},data:function(){return{productId:this.$route.params.id,originalProduct:{},product:{categories:[]},loadedCategories:[],errors:[]}},fetch:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.loadData(),e.loadCategories();case 2:case"end":return t.stop()}}),t)})))()},methods:{loadData:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.$vs.loading(),t.next=3,n.a.get("http://hanggmarket.com/api/product/show/"+e.productId).then((function(t){e.originalProduct=t.data;var r=[];e.originalProduct.categories.forEach((function(e){r.push(e.id)})),e.originalProduct.categories=r,e.product=JSON.parse(JSON.stringify(e.originalProduct))}));case 3:e.$vs.loading.close();case 4:case"end":return t.stop()}}),t)})))()},loadCategories:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n.a.get("http://hanggmarket.com/api/category",{params:{all:!0}}).then((function(t){e.loadedCategories=t.data}));case 2:case"end":return t.stop()}}),t)})))()},modifyProduct:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.validProduct()){t.next=3;break}return t.next=3,n.a.post("http://hanggmarket.com/api/product/update/"+e.productId,{name:e.product.name,description:e.product.description,barcode:e.product.barcode,categories:e.product.categories}).then((function(t){e.loadData(),e.$vs.notify({title:"Producto modificado.",text:"El producto ha sido modificado correctamente.",color:"success",icon:"check_box"})}));case 3:case"end":return t.stop()}}),t)})))()},validProduct:function(e){if(this.errors=[],this.product.name&&this.product.description&&this.product.barcode&&this.product.categories.length>0)return!0;this.errors.push("Debes de rellenar todos los campos.")}}},m=(r(211),Object(l.a)(v,(function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",[o("vs-row",[o("vs-col",{attrs:{"vs-w":"6"}},[o("h2",[e._v(e._s(e.originalProduct.name))]),e._v(" "),o("p",[o("vs-chip",{attrs:{color:"danger"}},[e._v(e._s(e.originalProduct.prices&&e.originalProduct.prices.length?e.originalProduct.prices[0].value+"€":"No disponible"))])],1),e._v(" "),o("vs-images",{staticClass:"images-slider",attrs:{hover:"scale","not-border-radius":""}},[e._l(e.originalProduct.images,(function(image,e){return o("vs-image",{key:e+75,attrs:{src:image.image}})})),e._v(" "),null!=e.originalProduct.images&&e.originalProduct.images.length?e._e():o("vs-image",{attrs:{src:r(200)}})],2),e._v(" "),o("vs-select",{attrs:{placeholder:"Selecciona una categoría...",label:"Categorías","label-placeholder":"Autocomplete",multiple:"",autocomplete:""},model:{value:e.product.categories,callback:function(t){e.$set(e.product,"categories",t)},expression:"product.categories"}},e._l(e.loadedCategories,(function(e,t){return o("vs-select-item",{key:t+400,attrs:{value:e.id,text:e.name}})})),1)],1),e._v(" "),o("vs-col",{attrs:{"vs-w":"6"}},[o("vs-input",{attrs:{"label-placeholder":"Nombre"},model:{value:e.product.name,callback:function(t){e.$set(e.product,"name",t)},expression:"product.name"}}),e._v(" "),o("vs-textarea",{attrs:{label:"Descripción"},model:{value:e.product.description,callback:function(t){e.$set(e.product,"description",t)},expression:"product.description"}}),e._v(" "),o("vs-input",{attrs:{type:"number","label-placeholder":"Codigo de barras"},model:{value:e.product.barcode,callback:function(t){e.$set(e.product,"barcode",t)},expression:"product.barcode"}}),e._v(" "),o("vs-button",{on:{click:e.modifyProduct}},[e._v("Guardar cambios")]),e._v(" "),o("vs-alert",{attrs:{active:e.errors.length>0,icon:"info",color:"danger"}},e._l(e.errors,(function(t){return o("p",[e._v(e._s(t))])})),0)],1)],1),e._v(" "),o("vs-row",[o("pricesTable",{attrs:{productId:e.productId}})],1)],1)}),[],!1,null,null,null));t.default=m.exports}}]);