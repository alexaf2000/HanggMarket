(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{200:function(e,t,r){e.exports=r.p+"img/72bab5f.jpg"},201:function(e,t,r){var content=r(208);"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,r(23).default)("36503942",content,!0,{sourceMap:!1})},207:function(e,t,r){"use strict";var o=r(201);r.n(o).a},208:function(e,t,r){(e.exports=r(22)(!1)).push([e.i,".product-item{margin:30px}",""])},215:function(e,t,r){"use strict";r.r(t);r(17);var o=r(2),c=r(7),n=r.n(c),d={data:function(){return{products:[],searching:{text:null,category:null},actualPage:1,pages:1,popupAddProduct:!1,productAdd:{name:"",description:"",barcode:"",price:"",date_start:null,date_end:null,images:[],categories:[]},loadedCategories:[]}},fetch:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.loadData(),e.loadCategories();case 2:case"end":return t.stop()}}),t)})))()},methods:{loadData:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.$vs.loading(),t.next=3,n.a.get("http://hanggmarket.com/api/product",{params:{page:e.actualPage,search:e.searching.text,category:e.searching.category}}).then((function(t){e.products=t.data.data,e.pages=t.data.last_page}));case 3:e.$vs.loading.close();case 4:case"end":return t.stop()}}),t)})))()},loadCategories:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n.a.get("http://hanggmarket.com/api/category",{params:{all:!0}}).then((function(t){e.loadedCategories=t.data}));case 2:case"end":return t.stop()}}),t)})))()},addProduct:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.$refs.newImages.srcs.length&&e.$refs.newImages.srcs.forEach((function(image){e.productAdd.images.push(image.src)})),n.a.post("http://hanggmarket.com/api/product/store",e.productAdd).then((function(t){e.loadData(),e.popupAddProduct=!1,e.productAdd={name:"",description:"",barcode:"",price:"",date_start:null,date_end:null,images:[],categories:[]}})).catch((function(t){422==t.response.status&&(e.productAdd.images=[],e.$vs.notify({title:"Error al añadir",text:"Comprueba que no exista el mismo producto y vuelve a intentarlo.",color:"danger",icon:"warning"}))}));case 2:case"end":return t.stop()}}),t)})))()},dialogDeleteProduct:function(e){this.selected=e,this.$vs.dialog({type:"confirm",color:"danger",title:"¿Estás seguro?",acceptText:"Confirmar",cancelText:"Cancelar",text:"Se va a proceder con la eliminación de el producto.",accept:this.deleteProduct})},deleteProduct:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n.a.delete("http://hanggmarket.com/api/product/destroy/"+e.selected).then((function(t){e.$vs.notify({title:"Producto eliminado.",text:"El producto ha sido eliminado correctamente.",color:"success",icon:"check_box"}),e.loadData()}));case 2:case"end":return t.stop()}}),t)})))()},goToProduct:function(e){this.$router.push("/products/"+e)}}},l=(r(207),r(12)),component=Object(l.a)(d,(function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",[o("vs-row",[o("vs-col",{attrs:{"vs-w":"2"}},[o("vs-button",{attrs:{icon:"add",color:"#007bef",size:"small"},on:{click:function(t){e.popupAddProduct=!0}}},[e._v("Añadir producto")])],1),e._v(" "),o("vs-col",{attrs:{"vs-w":"8"}},[o("vs-input",{staticStyle:{width:"90%"},attrs:{placeholder:"Buscar"},on:{keyup:e.loadData},model:{value:e.searching.text,callback:function(t){e.$set(e.searching,"text",t)},expression:"searching.text"}})],1),e._v(" "),o("vs-col",{attrs:{"vs-w":"2"}},[o("vs-select",{attrs:{placeholder:"Mostrar por categoría...",autocomplete:"",label:"Categoría"},on:{change:e.loadData},model:{value:e.searching.category,callback:function(t){e.$set(e.searching,"category",t)},expression:"searching.category"}},e._l(e.loadedCategories,(function(e,t){return o("vs-select-item",{key:t,attrs:{value:e.id,text:e.name}})})),1),e._v(" "),o("vs-popup",{attrs:{classContent:"popup-example",title:"Añadir producto",active:e.popupAddProduct},on:{"update:active":function(t){e.popupAddProduct=t}}},[o("vs-input",{attrs:{"label-placeholder":"Nombre"},model:{value:e.productAdd.name,callback:function(t){e.$set(e.productAdd,"name",t)},expression:"productAdd.name"}}),e._v(" "),o("vs-textarea",{attrs:{label:"Descripción",width:"50%",height:"120px"},model:{value:e.productAdd.description,callback:function(t){e.$set(e.productAdd,"description",t)},expression:"productAdd.description"}}),e._v(" "),o("vs-input",{attrs:{type:"number","label-placeholder":"Codigo de barras"},model:{value:e.productAdd.barcode,callback:function(t){e.$set(e.productAdd,"barcode",t)},expression:"productAdd.barcode"}}),e._v(" "),o("vs-input",{attrs:{type:"number","label-placeholder":"Precio"},model:{value:e.productAdd.price,callback:function(t){e.$set(e.productAdd,"price",t)},expression:"productAdd.price"}}),e._v(" "),o("vs-input",{attrs:{type:"date","label-placeholder":"Fecha inicio de precio"},model:{value:e.productAdd.date_start,callback:function(t){e.$set(e.productAdd,"date_start",t)},expression:"productAdd.date_start"}}),e._v(" "),o("vs-input",{attrs:{type:"date","label-placeholder":"Fecha finalizacion de recio"},model:{value:e.productAdd.date_end,callback:function(t){e.$set(e.productAdd,"date_end",t)},expression:"productAdd.date_end"}}),e._v(" "),o("vs-select",{attrs:{placeholder:"Categorías",multiple:"",autocomplete:"",label:"Categorías"},model:{value:e.productAdd.categories,callback:function(t){e.$set(e.productAdd,"categories",t)},expression:"productAdd.categories"}},e._l(e.loadedCategories,(function(e,t){return o("vs-select-item",{key:t,attrs:{value:e.id,text:e.name}})})),1),e._v(" "),o("vs-upload",{ref:"newImages",attrs:{multiple:"",text:"Imagen de producto",limit:"4","show-upload-button":!1,accept:"image/x-png, image/gif, image/jpeg"}}),e._v(" "),o("vs-button",{on:{click:e.addProduct}},[e._v("Añadir producto")])],1)],1)],1),e._v(" "),o("vs-row",{attrs:{"vs-justify":"center"}},[e._l(e.products,(function(t){return o("vs-col",{key:t.id,staticClass:"product-item",attrs:{type:"flex","vs-justify":"center","vs-align":"center","vs-w":"2"}},[o("vs-card",{staticClass:"cardx",attrs:{actionable:""}},[o("div",{attrs:{slot:"header"},slot:"header"},[o("h3",[e._v(e._s(t.name))])]),e._v(" "),o("div",{attrs:{slot:"media"},slot:"media"},[o("img",{attrs:{height:"200",src:t.images.length?t.images[0].image:r(200)}})]),e._v(" "),o("div",[o("p",[o("i",[e._v(e._s(t.barcode))])]),e._v(" "),o("p",[e._v(e._s(t.description))]),e._v(" "),o("vs-chip",{attrs:{color:"danger"}},[e._v(e._s(t.prices.length?t.prices[0].value+"€":"No disponible"))]),e._v(" "),e._l(t.categories,(function(t,r){return o("vs-chip",{key:r},[e._v(e._s(t.name))])}))],2),e._v(" "),o("div",{attrs:{slot:"footer"},slot:"footer"},[o("vs-row",{attrs:{"vs-justify":"flex-end"}},[o("vs-button",{attrs:{color:"primary",radius:"",icon:"open_in_browser"},on:{click:function(r){return e.goToProduct(t.id)}}}),e._v(" "),o("vs-button",{attrs:{color:"danger",radius:"",icon:"delete"},on:{click:function(r){return e.dialogDeleteProduct(t.id)}}})],1)],1)])],1)})),e._v(" "),e.products.length?e._e():o("vs-col",{staticStyle:{"text-align":"center",margin:"5px"},attrs:{"vs-jusify":"center"}},[e._v("No se han encontrado productos.")])],2),e._v(" "),o("vs-row",[o("vs-pagination",{staticClass:"center-pagination",attrs:{total:e.pages},on:{change:e.loadData},model:{value:e.actualPage,callback:function(t){e.actualPage=t},expression:"actualPage"}})],1)],1)}),[],!1,null,null,null);t.default=component.exports}}]);